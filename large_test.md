# Larger experiment #
The experiment setup is the same as in [performance test](Performance.md), except there are now 4.000.000 documents in index and 10.000 search operations are performed in batch search. For the storage, hard disk drive is used instead of ramfs, and there is enough filesystem cache to hold 800M file data (during merge operations). Randomness (delays) in disk access plays important role, even more if disk drive is slow (like in this case), therefore uncertainties are very high, Test was performed on laptop and not on heavy duty server.

## Compound file format ##

Direct, chunk 4k

<table border='1'><tr><th>Method</th><td>WriterOpen(ms)</td><td>Indexing(ms)</td><td>Optimization(ms)</td><td>Closing(ms)</td><td>ReaderOpen(ms)</td><td>Single search(ms)</td><td>Search(ms)</td><td>ReaderClose(ms)</td><td>Size(bytes)</td></tr><tr><td>lucene</td><td>51,00+/-13,09 100,00%+/-51,35%</td><td>78409,38+/-4442,07 100,00%+/-11,33%</td><td>18696,88+/-4565,65 100,00%+/-48,84%</td><td>10848,00+/-3748,49 100,00%+/-69,11%</td><td>8,38+/-1,92 100,00%+/-45,91%</td><td>8,63+/-0,74 100,00%+/-17,25%</td><td>257,00+/-23,52 100,00%+/-18,30%</td><td>0,25+/-0,46 100,00%+/-370,33%</td><td>387247316,00+/-0,00 100,00%+/-0,00%</td></tr><tr><td>compressed</td><td>71,00+/-48,18 139,22%+/-130,21%</td><td>90408,50+/-8390,67 115,30%+/-17,23%</td><td>41823,38+/-2487,80 223,69%+/-67,93%</td><td>1352,50+/-61,02 12,47%+/-4,87%</td><td>50,88+/-15,75 607,46%+/-327,54%</td><td>30,13+/-2,23 349,28%+/-56,01%</td><td>3867,88+/-167,56 1505,01%+/-202,93%</td><td>0,13+/-0,35 50,00%+/-234,00%</td><td>40563293,00+/-2,07 10,47%+/-0,00%</td></tr></table>

Direct, chunk 16k
<table border='1'><tr><th>Method</th><td>WriterOpen(ms)</td><td>Indexing(ms)</td><td>Optimization(ms)</td><td>Closing(ms)</td><td>ReaderOpen(ms)</td><td>Single search(ms)</td><td>Search(ms)</td><td>ReaderClose(ms)</td><td>Size(bytes)</td></tr><tr><td>lucene</td><td>77,97+/-155,10 100,00%+/-397,86%</td><td>86763,47+/-4218,26 100,00%+/-9,72%</td><td>27063,73+/-6253,85 100,00%+/-46,22%</td><td>9436,10+/-4284,98 100,00%+/-90,82%</td><td>8,27+/-2,85 100,00%+/-69,00%</td><td>11,97+/-9,82 100,00%+/-164,14%</td><td>259,93+/-33,98 100,00%+/-26,14%</td><td>0,03+/-0,18 100,00%+/-1095,45%</td><td>387247316,00+/-0,00 100,00%+/-0,00%</td></tr><tr><td>compressed</td><td>52,40+/-23,15 67,21%+/-163,39%</td><td>97345,03+/-5230,07 112,20%+/-11,48%</td><td>44006,13+/-3233,26 162,60%+/-49,52%</td><td>1303,20+/-144,65 13,81%+/-7,80%</td><td>18,40+/-5,59 222,58%+/-144,45%</td><td>27,90+/-6,71 233,15%+/-247,43%</td><td>1377,50+/-58,84 529,94%+/-91,91%</td><td>0,03+/-0,18 100,00%+/-1095,45%</td><td>36272245,97+/-2,08 9,37%+/-0,00%</td></tr></table>


Direct, chunk 128k

<table border='1'><tr><th>Method</th><td>WriterOpen(ms)</td><td>Indexing(ms)</td><td>Optimization(ms)</td><td>Closing(ms)</td><td>ReaderOpen(ms)</td><td>Single search(ms)</td><td>Search(ms)</td><td>ReaderClose(ms)</td><td>Size(bytes)</td></tr><tr><td>lucene</td><td>51,40+/-24,86 100,00%+/-96,72%</td><td>76699,33+/-4484,65 100,00%+/-11,69%</td><td>20866,63+/-4497,88 100,00%+/-43,11%</td><td>9187,30+/-4196,77 100,00%+/-91,36%</td><td>9,03+/-7,02 100,00%+/-155,52%</td><td>11,10+/-5,16 100,00%+/-93,01%</td><td>246,77+/-19,51 100,00%+/-15,82%</td><td>0,13+/-0,35 100,00%+/-518,62%</td><td>387247316,00+/-0,00 100,00%+/-0,00%</td></tr><tr><td>compressed</td><td>49,73+/-22,96 96,76%+/-91,46%</td><td>92189,00+/-6985,62 120,20%+/-16,14%</td><td>45528,17+/-2233,49 218,19%+/-57,73%</td><td>1240,83+/-76,76 13,51%+/-7,01%</td><td>17,73+/-12,08 196,31%+/-286,35%</td><td>33,40+/-18,07 300,90%+/-302,74%</td><td>1722,73+/-173,75 698,12%+/-125,62%</td><td>0,07+/-0,25 50,00%+/-319,94%</td><td>35333905,90+/-2,02 9,12%+/-0,00%</td></tr></table>

## Without compound file format ##

Direct, chunk 4k
<table border='1'><tr><th>Method</th><td>WriterOpen(ms)</td><td>Indexing(ms)</td><td>Optimization(ms)</td><td>Closing(ms)</td><td>ReaderOpen(ms)</td><td>Single search(ms)</td><td>Search(ms)</td><td>ReaderClose(ms)</td><td>Size(bytes)</td></tr><tr><td>lucene</td><td>48,40+/-19,10 100,00%+/-78,94%</td><td>83441,70+/-2943,18 100,00%+/-7,05%</td><td>14107,40+/-905,38 100,00%+/-12,84%</td><td>9083,80+/-2733,07 100,00%+/-60,17%</td><td>8,50+/-0,71 100,00%+/-16,64%</td><td>10,40+/-3,03 100,00%+/-58,19%</td><td>278,60+/-36,95 100,00%+/-26,52%</td><td>0,00+/-0,00 NaN%+/-NaN%</td><td>387247187,00+/-0,00 100,00%+/-0,00%</td></tr><tr><td>compressed</td><td>46,10+/-16,29 95,25%+/-71,24%</td><td>81130,40+/-2739,87 97,23%+/-6,71%</td><td>27965,90+/-655,42 198,24%+/-17,37%</td><td>2392,10+/-117,32 26,33%+/-9,21%</td><td>42,70+/-10,36 502,35%+/-163,68%</td><td>29,50+/-1,58 283,65%+/-97,73%</td><td>1431,00+/-101,35 513,64%+/-104,49%</td><td>0,20+/-0,63 Infinity%+/-NaN%</td><td>40610134,70+/-1,64 10,49%+/-0,00%</td></tr></table>


Direct, chunk 16k

<table border='1'><tr><th>Method</th><td>WriterOpen(ms)</td><td>Indexing(ms)</td><td>Optimization(ms)</td><td>Closing(ms)</td><td>ReaderOpen(ms)</td><td>Single search(ms)</td><td>Search(ms)</td><td>ReaderClose(ms)</td><td>Size(bytes)</td></tr><tr><td>lucene</td><td>107,30+/-186,19 100,00%+/-347,05%</td><td>83418,90+/-7322,63 100,00%+/-17,56%</td><td>14529,80+/-1453,17 100,00%+/-20,00%</td><td>7895,70+/-3642,38 100,00%+/-92,26%</td><td>11,50+/-10,74 100,00%+/-186,82%</td><td>11,30+/-5,12 100,00%+/-90,65%</td><td>255,80+/-19,23 100,00%+/-15,03%</td><td>0,00+/-0,00 NaN%+/-NaN%</td><td>387247187,00+/-0,00 100,00%+/-0,00%</td></tr><tr><td>compressed</td><td>42,50+/-15,64 39,61%+/-83,30%</td><td>84869,30+/-9712,35 101,74%+/-20,57%</td><td>27422,90+/-1296,22 188,74%+/-27,80%</td><td>2248,40+/-134,21 28,48%+/-14,84%</td><td>18,50+/-1,96 160,87%+/-167,29%</td><td>32,30+/-12,90 285,84%+/-243,74%</td><td>864,90+/-58,64 338,12%+/-48,34%</td><td>0,20+/-0,42 Infinity%+/-NaN%</td><td>36282265,10+/-2,73 9,37%+/-0,00%</td></tr></table>

Direct, Chunk 128k

<table border='1'><tr><th>Method</th><td>WriterOpen(ms)</td><td>Indexing(ms)</td><td>Optimization(ms)</td><td>Closing(ms)</td><td>ReaderOpen(ms)</td><td>Single search(ms)</td><td>Search(ms)</td><td>ReaderClose(ms)</td><td>Size(bytes)</td></tr><tr><td>lucene</td><td>53,80+/-29,35 100,00%+/-109,10%</td><td>78282,60+/-398,61 100,00%+/-1,02%</td><td>13918,40+/-1318,97 100,00%+/-18,95%</td><td>8064,70+/-3251,82 100,00%+/-80,64%</td><td>8,60+/-1,96 100,00%+/-45,47%</td><td>8,80+/-0,42 100,00%+/-9,58%</td><td>247,00+/-23,60 100,00%+/-19,11%</td><td>0,00+/-0,00 NaN%+/-NaN%</td><td>387247187,00+/-0,00 100,00%+/-0,00%</td></tr><tr><td>compressed</td><td>61,40+/-45,33 114,13%+/-146,51%</td><td>79452,30+/-543,57 101,49%+/-1,21%</td><td>29442,50+/-407,78 211,54%+/-22,98%</td><td>2137,80+/-112,12 26,51%+/-12,08%</td><td>19,00+/-10,50 220,93%+/-172,30%</td><td>26,00+/-1,05 295,45%+/-26,13%</td><td>1663,30+/-104,85 673,40%+/-106,79%</td><td>0,10+/-0,32 Infinity%+/-NaN%</td><td>35333011,30+/-1,89 9,12%+/-0,00%</td></tr></table>